
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  
  <title>scope 1 | You-Dont-Know-JS | 小沙丘的网络漫游记</title>
 
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/JS/">
            JS
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/JS/">
              JS
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/03/26/english-xin1-19/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/03/26/draft-event-8-1/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/03/26/english-xin1-19/">
                    Lesson 19 Tired and thirsty
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/03/26/draft-event-8-1/">
                    心学 | 草稿
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>scope 1 | You-Dont-Know-JS</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年03月26日 13:03
  </p>
</div>
</div>



  <div class="page">
      <h2 id="What-is-Scope"><a href="#What-is-Scope" class="headerlink" title="What is Scope?"></a>What is Scope?</h2><p>These questions speak to the need for a well-defined set of rules for storing variables in some location, and for finding those variables at a later time. We’ll call that set of rules: Scope.</p>
<h2 id="Compiler-Theory"><a href="#Compiler-Theory" class="headerlink" title="Compiler Theory"></a>Compiler Theory</h2><p>In a traditional compiled-language process, a chunk of source code, your program, will undergo typically three steps before it is executed, roughly called “compilation”:</p>
<blockquote>
<p>Tokenizing/Lexing: breaking up a string of characters into meaningful (to the language) chunks, called tokens. For instance, consider the program: var a = 2;. This program would likely be broken up into the following tokens: var, a, =, 2, and ;. Whitespace may or may not be persisted as a token, depending on whether it’s meaningful or not.</p>
<p>Parsing: taking a stream (array) of tokens and turning it into a tree of nested elements, which collectively represent the grammatical structure of the program. This tree is called an “AST” (Abstract Syntax Tree).</p>
<p>Code-Generation: the process of taking an AST and turning it into executable code. This part varies greatly depending on the language, the platform it’s targeting, etc.</p>
</blockquote>
<h2 id="Understanding-Scope"><a href="#Understanding-Scope" class="headerlink" title="Understanding Scope"></a>Understanding Scope</h2><p>Let’s meet the cast of characters that interact to process the program var a = 2;, so we understand their conversations that we’ll listen in on shortly:</p>
<blockquote>
<p>Engine: responsible for start-to-finish compilation and execution of our JavaScript program.</p>
<p>Compiler: one of Engine’s friends; handles all the dirty work of parsing and code-generation (see previous section).</p>
<p>Scope: another friend of Engine; collects and maintains a look-up list of all the declared identifiers (variables), and enforces a strict set of rules as to how these are accessible to currently executing code.</p>
</blockquote>
<h2 id="LHS-AND-RHS"><a href="#LHS-AND-RHS" class="headerlink" title="LHS AND RHS"></a>LHS AND RHS</h2><p>Being slightly glib for a moment, you could also think “RHS” instead means “retrieve his/her source (value)”, implying that RHS means “go get the value of…”.</p>
<p>Let’s dig into that deeper.</p>
<p>When I say:</p>
<pre class=" language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The reference to a is an RHS reference, because nothing is being assigned to a here. Instead, we’re looking-up to retrieve the value of a, so that the value can be passed to console.log(..).</p>
<p>By contrast:</p>
<pre class=" language-js"><code class="language-js">a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre>
<p>The reference to a here is an LHS reference, because we don’t actually care what the current value is, we simply want to find the variable as a target for the = 2 assignment operation.</p>
<blockquote>
<p>Note: LHS and RHS meaning “left/right-hand side of an assignment” doesn’t necessarily literally mean “left/right side of the = assignment operator”. There are several other ways that assignments happen, and so it’s better to conceptually think about it as: “who’s the target of the assignment (LHS)” and “who’s the source of the assignment (RHS)”.</p>
</blockquote>
<h2 id="Engine-Scope-Conversation"><a href="#Engine-Scope-Conversation" class="headerlink" title="Engine/Scope Conversation"></a>Engine/Scope Conversation</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 2</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let’s imagine the above exchange (which processes this code snippet) as a conversation. The conversation would go a little something like this:</p>
<pre class=" language-js"><code class="language-js">Engine<span class="token punctuation">:</span> Hey Scope<span class="token punctuation">,</span> I have an RHS reference <span class="token keyword">for</span> foo<span class="token punctuation">.</span> Ever heard <span class="token keyword">of</span> it<span class="token operator">?</span>

Scope<span class="token punctuation">:</span> Why yes<span class="token punctuation">,</span> I have<span class="token punctuation">.</span> Compiler declared it just a second ago<span class="token punctuation">.</span> He's a <span class="token keyword">function</span><span class="token punctuation">.</span> Here you go<span class="token punctuation">.</span>

Engine<span class="token punctuation">:</span> Great<span class="token punctuation">,</span> thanks<span class="token operator">!</span> OK<span class="token punctuation">,</span> I'm executing foo<span class="token punctuation">.</span>

Engine<span class="token punctuation">:</span> Hey<span class="token punctuation">,</span> Scope<span class="token punctuation">,</span> I've got an LHS reference <span class="token keyword">for</span> a<span class="token punctuation">,</span> ever heard <span class="token keyword">of</span> it<span class="token operator">?</span>

Scope<span class="token punctuation">:</span> Why yes<span class="token punctuation">,</span> I have<span class="token punctuation">.</span> Compiler declared it <span class="token keyword">as</span> a formal parameter to foo just recently<span class="token punctuation">.</span> Here you go<span class="token punctuation">.</span>

Engine<span class="token punctuation">:</span> Helpful <span class="token keyword">as</span> always<span class="token punctuation">,</span> Scope<span class="token punctuation">.</span> Thanks again<span class="token punctuation">.</span> Now<span class="token punctuation">,</span> time to assign <span class="token number">2</span> to a<span class="token punctuation">.</span>

Engine<span class="token punctuation">:</span> Hey<span class="token punctuation">,</span> Scope<span class="token punctuation">,</span> sorry to bother you again<span class="token punctuation">.</span> I need an RHS look<span class="token operator">-</span>up <span class="token keyword">for</span> console<span class="token punctuation">.</span> Ever heard <span class="token keyword">of</span> it<span class="token operator">?</span>

Scope<span class="token punctuation">:</span> No problem<span class="token punctuation">,</span> Engine<span class="token punctuation">,</span> <span class="token keyword">this</span> is what I <span class="token keyword">do</span> all day<span class="token punctuation">.</span> Yes<span class="token punctuation">,</span> I<span class="token string">'ve got console. He'</span>s built<span class="token operator">-</span><span class="token keyword">in</span><span class="token punctuation">.</span> Here ya go<span class="token punctuation">.</span>

Engine<span class="token punctuation">:</span> Perfect<span class="token punctuation">.</span> Looking up <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span> OK<span class="token punctuation">,</span> great<span class="token punctuation">,</span> it's a <span class="token keyword">function</span><span class="token punctuation">.</span>

Engine<span class="token punctuation">:</span> Yo<span class="token punctuation">,</span> Scope<span class="token punctuation">.</span> Can you help me out <span class="token keyword">with</span> an RHS reference to a<span class="token punctuation">.</span> I think I remember it<span class="token punctuation">,</span> but just want to double<span class="token operator">-</span>check<span class="token punctuation">.</span>

Scope<span class="token punctuation">:</span> You<span class="token string">'re right, Engine. Same guy, hasn'</span>t changed<span class="token punctuation">.</span> Here ya go<span class="token punctuation">.</span>

Engine<span class="token punctuation">:</span> Cool<span class="token punctuation">.</span> Passing the value <span class="token keyword">of</span> a<span class="token punctuation">,</span> which is <span class="token number">2</span><span class="token punctuation">,</span> into <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre>
<h2 id="Quiz-Answers"><a href="#Quiz-Answers" class="headerlink" title="Quiz Answers"></a>Quiz Answers</h2><p>function foo(a) {<br>    var b = a;<br>    return a + b;<br>}</p>
<p>var c = foo( 2 );<br>Identify all the LHS look-ups (there are 3!).</p>
<p>c = .., a = 2 (implicit param assignment) and b = ..</p>
<p>Identify all the RHS look-ups (there are 4!).</p>
<p>foo(2.., = a;, a + .. and .. + b</p>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="#">« 无</a></span>
  <span class="right"><a href="/2018/03/26/draft-code-not-know-js-2/">Lexical Sc »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年03月26日 13:03</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  draft-code-not-know-js-1
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

