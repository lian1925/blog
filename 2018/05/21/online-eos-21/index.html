
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  <link href="//vjs.zencdn.net/6.7/video-js.min.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/6.7/video.min.js"></script>
  
  <title>DPOS BFT— Pipelined Byzantine【拜占庭】 Fault Tolerance【容错】 | 小沙丘的网络漫游记</title>
 <meta name="description" content="" >

 <!-- 百度统计 -->
 <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?eafa0040e1ab3bed28ce82ef03de6e01";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/EOS/">
            EOS
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/EOS/">
              EOS
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/05/21/online-eos-20/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/05/22/online-cpp-1/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/05/21/online-eos-20/">
                    EOS.IO Software【软件】 Roadmap【蓝图】
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/05/22/online-cpp-1/">
                    C++ Dos and Don'ts
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>DPOS BFT— Pipelined Byzantine【拜占庭】 Fault Tolerance【容错】</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年05月21日 20:05
  </p>
</div>
</div>



  
  <div class="page">
      <p>There are two general【一般】 blockchain【区块链】 consensus【共识】 systems: those that produce unambiguous【不含糊的】 100% finality【最终】 given a defined set of validators【校验者】 and those which do not provide 100% finality【最终】 but instead rely on【依赖】 high probability【概率】 of finality.</p>
<p>The first generation【一代】 blockchain consensus algorithms【算法】 (Proof of Work, Proof of Stake, and BitShares’ Delegated【委派】 Proof of Stake) only offer high probability【可能性】 of finality that grows【增长】 with time. In theory someone could pay【支付】 enough money to mine【挖矿】 an alternative【替代者】 “longer”【更长】 Bitcoin blockchain that goes all the way back【溯回】 to genesis【起源】.</p>
<p>More recent consensus【共识】 algorithms, whether HashGraph【哈希图】, Casper, Tendermint, or DPOS BFT all adopt long-established【长建立】 principles【原则】 of Paxos and related【相关】 consensus algorithms. Under these models it is possible to reach【达到】 unambiguous【不含糊】 finality【最终】 under all network conditions【所有网络情况】 so long as【只要】 more than ⅔ of participants【参与者】 are honest【诚实】.</p>
<p>Objective【目标】 and unambiguous 100% finality is a critical【严格】 property【合理】 for all blockchains that wish【希望】 to support inter-blockchain communication【通信】. Absent 100% finality, a reversion【继承权】 on one chain could have irreconcilable【不相容】 ripple effects【效果】 across all interconnected【相互连接】 chains.</p>
<p>The abstract【抽象】 protocol【协议】 for these more recent protocols involves:</p>
<p>1、Propose【提议】 block<br>2、All participants【参与者】 acknowledge block (pre-commitment)<br>3、All participants acknowledge when ⅔+ have sent them pre-commitments (commitment)<br>4、A block is final once a node has received ⅔+ commitments【许诺】<br>5、Unanimous agreement on finality is guaranteed【着急】 unless ⅓+ are bad and evidence of bad behavior is available to all</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*hmRTjiTdtuxonOGAWRDtCg.png" alt="Abstract BFT Life Cycle"></p>
<p>What makes the various【不同】 consensus protocols different are:</p>
<p>1、Deciding when and who gets to propose a block</p>
<p>2、Deciding how commitments are logged &amp; communicated【通信】</p>
<p>3、How byzantine【拜占庭】 behavior is documented</p>
<p>4、Punishment【发布】 for byzantine behavior</p>
<p>Some of these differences are political【政治】 and some of them are technical【技术】 in nature. Examples of political differences include:</p>
<p>1、DPOS elects the set of proposers &amp; validators based upon stake【股份】</p>
<p>2、Casper relies on proof-of-work to determine when and who and when gets to propose and bonded-stake-weight to determine【决定】 who the validators【校验者】 are</p>
<p>3、DPOS punishes【惩罚】 objective and subjective bad behavior by voting【投票】 people out</p>
<p>4、Casper only punishes【惩罚】 objective bad behavior by slashing bonds</p>
<p>Under normal【一般】 conditions, the political differences【不同】 make no day-to-day impact on the experience【经验】 of users relying on the consensus mechanism【机制】 to order and finalize transactions【交易】. The threshold【阈值】 for malicious behavior is so high and the penalties so great that for all practical【实际】 purposes it doesn’t happen.</p>
<p>It is the technical【技术】 differences in the protocols that give rise to real-world impact【影响】 on user experience. This includes things such as latency【延时】 until finality, degrees【分级】 of finality, bandwidth【带宽】, and proof generation / validation overhead.</p>
<p>The simplest【最简单】 possible algorithm has everyone reach consensus【共识】 on one block before any progress can be made on the next【下一个】 block. This involves every participant【参与者】 sending every other participant two messages per【每个】 block. In a global network the speed of light limits the practical latency from time of proposal to the time a node receives ⅔+ commit messages【信息】 to about one second (500ms round trip latency * 2 round-trips). All networks I have observed【观察】 seem to be in the 2–3 second latency camp. These simple【简单】 protocols also have a “timer” which introduces【介绍】 a new proposal if no consensus can be reached【达到】 over the validity of the current【当前】 proposal. This timer is generally longer【更长】 than the expected confirmation【确认】 time.</p>
<p>Protocols like Casper attempt to minimize【最小化】 the overhead by relying on【依赖】 proof-of-work for short-term【短期】 consensus and only reaching finality【最终】 over every 100th block (checkpoint). This means Casper-based chains reach finality every 20 to 30 minutes.</p>
<h2 id="DPOS-BFT-Pipeline-Consensus【共识】"><a href="#DPOS-BFT-Pipeline-Consensus【共识】" class="headerlink" title="DPOS BFT Pipeline Consensus【共识】"></a>DPOS BFT Pipeline Consensus【共识】</h2><p>Modern Delegated【委派】 Proof of Stake【股份】 with BFT as implemented【实现】 in EOSIO uses a pipelined approach to deliver the proposal, pre-commitment, and commitment messages. This means under normal operating【操作】 conditions, every block advances the finality of one block and this is achieved【达到】 by only requiring one proposal per time slot. In other words, the cost of DPOS with BFT finality in terms of signature【签名】 verifications【验证】, hash calculations, network bandwidth, etc., is equal to the cost of older DPOS systems that relied upon eventual consistency and the longest【最长】 chain rule similar to Bitcoin and Ethereum (pre Casper).</p>
<p>Only DPOS BFT can efficiently【有效】 scale to an unlimited【无限】 number of validators (at cost to latency). Other protocols grow the resource requirements for finality with O(2N) the number of participants as everyone must talk to everyone twice for each block or checkpoint. With more parties involved,more signatures【签名】, network overhead, and storage【存储】 are required and there is greater latency.</p>
<p>Assuming DPOS BFT with two second block interval and 21 producers, finality can be reached after 1 minute, but a new block reaches【达到】 finality every two seconds. This is achieved by pipelining the BFT confirmations【确认】. Platforms like EOSIO produce blocks every 500ms, but only rotate proposers every 12 blocks. This means BFT finality takes about 3 minutes based upon pure BFT DPOS block confirmations. The end result is 10x faster than Casper for finality for individual blocks, but a new block reaches finality every two seconds versus every 30 minutes.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/0*-mVXGabXbLEZsgKu." alt=""></p>
<h2 id="DPOS-BFT-w-optional-Low-Latency【低延时】-Confirmation【确认】"><a href="#DPOS-BFT-w-optional-Low-Latency【低延时】-Confirmation【确认】" class="headerlink" title="DPOS BFT w/ optional Low-Latency【低延时】 Confirmation【确认】"></a>DPOS BFT w/ optional Low-Latency【低延时】 Confirmation【确认】</h2><p>DPOS Hybrid Pipeline / Realtime BFT<br>There are many applications【应用】 where a three minute time for finality is undesirable and/or the DPOS proofs for light clients for a particular block are larger than desired. In this case, a blockchain can make the design choice to do a BFT pre-commit &amp; commit message over every pending block. This gives DPOS-BFT chains finality latency of 1–2 seconds at the expense of the additional network overhead, storage requirements, and CPU usage. Unlike protocols such as Tendermint/Cosmos there can be multiple proposals “in-the pipeline” at the same time. It is even possible that some blocks never receive the “real time” commitment due to network splits, but never the less they are eventually indirectly confirmed【确认】.</p>
<p>With the hybrid approach【方法】 light clients【客户】 can validate【校验】 a block with 15 signatures【签名】 and/or use more advanced cryptographic techniques【技术】 to merge【融合】 commit signatures into a single signature. Without the commit messages light clients can still reach BFT finality using a number of consecutive block headers【头部】.</p>
<h2 id="Degrees【分级】-of-Security【安全】"><a href="#Degrees【分级】-of-Security【安全】" class="headerlink" title="Degrees【分级】 of Security【安全】"></a>Degrees【分级】 of Security【安全】</h2><p>It has long been understood【明白】 that for many applications, such as blog posts and social media voting【投票】, waiting for 100% finality is overkill when 99.999% finality can be achieved in less than a second. Protocols like Casper give users the option of relying on【依赖】 Proof of Work confirmations when waiting for the next checkpoint is overkill.</p>
<p>Some full nodes may not care to process the overhead of all BFT pre-commit/commit messages when all they require is blockchain state【状态】. It is enough to know that the block producers (proposers/validators) are reaching real-time consensus and that their blockheaders eventually prove BFT consensus a couple minutes later.</p>
<p>Each consensus algorithm makes certain choices【选择】 for users and degrades to less-secure variations in different ways. Tendermint/Cosmos/Ripple don’t give users a choice to operate with anything less than full finality. Ethereum gives users a fall-back to proof-of-work, and DPOS-BFT falls back to the original DPOS guarantees【保证】.</p>
<p>It is even possible【可能】 to layer the Casper checkpoint algorithm with slashing conditions on top of the DPOS BFT block proposal system. Such an approach would create multiple【多】 independent validator sets with both political and economic incentives for good behavior【行为】.</p>
<h2 id="User-Experience【经验】"><a href="#User-Experience【经验】" class="headerlink" title="User Experience【经验】"></a>User Experience【经验】</h2><p>Delegated Proof of Stake with BFT optimizes【优化】 the nominal case while being no-worse in the worst case. Under normal conditions, elected【选举】 block producers are trusted【可信】 public figures with legal liabilities and highly reliable nodes. The probability that a produced block will reach finality is already 99.999% which means that the average user gets near-certain finality in under a second. This is reliable【可靠】 enough for almost all day-to-day financial transactions. Larger financial transactions【交易】, such as buying a car, merely require the user to wait a few seconds for absolute finality【最终】.</p>
<p>Each user can decide【决定】 for themselves how much overhead and/or delay【推迟】 they wish【意愿】 to incur and how big the proofs【证明】 they want to generate【生成】 for inter-blockchain communication【交流】, whereas other protocols do not give users that choice【选择】.</p>
<h2 id="Conclusion【结论】"><a href="#Conclusion【结论】" class="headerlink" title="Conclusion【结论】"></a>Conclusion【结论】</h2><p>All modern【现代】 consensus algorithms that follow【遵循】 the BFT consensus principles【原则】 originally【源于】 introduced the 1980’s can reach a secure【安全】 and final【最终】 state in the worst-case of a partitioned network【网络】 with ⅓ byzantine participants. Only DPOS BFT and EOSIO is optimized for the 99.999% case of 100% honest【诚实】 nodes without network partitions. DPOS BFT achieves this optimized【优化】 performance【表现】 without sacrificing【牺牲】 the security【安全】 guarantees【保证】 that other protocols provide.</p>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="/2018/05/21/online-eos-20/">« EOS.IO Sof...</a></span>
  <span class="right"><a href="/2018/05/24/online-eos-22/">Calling【呼唤... »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年05月21日 20:05</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  online-eos-21
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

