
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  <link href="//vjs.zencdn.net/6.7/video-js.min.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/6.7/video.min.js"></script>
  
  <title>Programs【编程】 &amp; Tools【工具】 | 小沙丘的网络漫游记</title>
 <meta name="description" content="" >

 <!-- 百度统计 -->
 <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?eafa0040e1ab3bed28ce82ef03de6e01";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/EOS/">
            EOS
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/EOS/">
              EOS
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/05/21/online-eos-5/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/05/21/online-eos-7/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/05/21/online-eos-5/">
                    Local局部 Environment环境
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/05/21/online-eos-7/">
                    Accounts【账户】 & Permissions【权限】
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>Programs【编程】 &amp; Tools【工具】</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年05月21日 19:05
  </p>
</div>
</div>



  
  <div class="page">
      <h2 id="Programs【编程】"><a href="#Programs【编程】" class="headerlink" title="Programs【编程】"></a>Programs【编程】</h2><h3 id="nodeos"><a href="#nodeos" class="headerlink" title="nodeos"></a>nodeos</h3><p>The core EOSIO daemon【进程】 that can be configured【配置】 with plugins【插件】 to run a node. Example【示例】 uses are block production, dedicated【专用的】 API endpoints【终端】, and local【本地】 development.</p>
<h3 id="cleos"><a href="#cleos" class="headerlink" title="cleos"></a>cleos</h3><p>cleos is a command line tool【命令行工具】 that interfaces【接口】 with the REST API exposed【暴露】 by nodeos. In order to use cleos you will need to have the end point (IP address【地址】 and port【端口】 number) to a nodeos instance【实例】 and also configure cleos to load the ‘eosio::chain_api_plugin’. cleos contains【包含】 documentation for all of its commands. For a list of all commands known to cleos, simply run【运行】 it with no arguments【参数】:</p>
<pre class=" language-js"><code class="language-js">$ cleos
ERROR<span class="token punctuation">:</span> RequiredError<span class="token punctuation">:</span> Subcommand required
Command Line Interface <span class="token class-name">to</span> EOSIO Client
Usage<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>cleos <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> SUBCOMMAND

Options【可选】<span class="token punctuation">:</span>
  <span class="token operator">-</span>h<span class="token punctuation">,</span><span class="token operator">--</span>help                   Print <span class="token keyword">this</span> help message and exit
  <span class="token operator">-</span>H<span class="token punctuation">,</span><span class="token operator">--</span>host TEXT<span class="token operator">=</span>localhost    the host where nodeos is running
  <span class="token operator">-</span>p<span class="token punctuation">,</span><span class="token operator">--</span>port UINT<span class="token operator">=</span><span class="token number">8888</span>         the port where nodeos is running
  <span class="token operator">--</span>wallet<span class="token operator">-</span>host TEXT<span class="token operator">=</span>localhost
                              the host where keosd is running
  <span class="token operator">--</span>wallet<span class="token operator">-</span>port UINT<span class="token operator">=</span><span class="token number">8888</span>     the port where keosd is running
  <span class="token operator">-</span>v<span class="token punctuation">,</span><span class="token operator">--</span>verbose                output verbose messages on error

Subcommands<span class="token punctuation">:</span>
  version                     Retrieve version information
  create                      Create various items<span class="token punctuation">,</span> on and off the blockchain
  <span class="token keyword">get</span>                         Retrieve various items and information <span class="token keyword">from</span> the blockchain
  <span class="token keyword">set</span>                         Set or update blockchain state
  transfer                    Transfer token <span class="token keyword">from</span> account to account
  net                         Interact <span class="token keyword">with</span> local p2p network connections
  wallet                      Interact <span class="token keyword">with</span> local wallet
  benchmark                   Configure and execute benchmarks
  push                        Push arbitrary transactions to the blockchain
</code></pre>
<p>To get help【帮助】 with any particular【详细】 subcommand, run it with no arguments【无参数】 as well:</p>
<pre class=" language-js"><code class="language-js">$ cleos create
ERROR<span class="token punctuation">:</span> RequiredError<span class="token punctuation">:</span> Subcommand required
Create various【不同】 items<span class="token punctuation">,</span> on and off the blockchain
Usage<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>cleos create SUBCOMMAND

Subcommands<span class="token punctuation">:</span>
  key                         Create a <span class="token keyword">new</span> <span class="token class-name">keypair</span> and print the <span class="token keyword">public</span> and <span class="token keyword">private</span> keys
  account                     Create a <span class="token keyword">new</span> <span class="token class-name">account</span> on the blockchain
  producer                    Create a <span class="token keyword">new</span> <span class="token class-name">producer</span> on the blockchain

$ cleos create account
ERROR<span class="token punctuation">:</span> RequiredError<span class="token punctuation">:</span> creator
Create a <span class="token keyword">new</span> <span class="token class-name">account</span> on the blockchain
Usage<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>cleos create account <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> creator name OwnerKey ActiveKey

Positionals<span class="token punctuation">:</span>
  creator TEXT                The name <span class="token keyword">of</span> the account creating the <span class="token keyword">new</span> <span class="token class-name">account</span>
  name TEXT                   The name <span class="token keyword">of</span> the <span class="token keyword">new</span> <span class="token class-name">account</span>
  OwnerKey TEXT               The owner <span class="token keyword">public</span> key <span class="token keyword">for</span> the account
  ActiveKey TEXT              The active <span class="token keyword">public</span> key <span class="token keyword">for</span> the account

Options<span class="token punctuation">:</span>
  <span class="token operator">-</span>s<span class="token punctuation">,</span><span class="token operator">--</span>skip<span class="token operator">-</span>signature         Specify that unlocked wallet keys should not be used to sign transaction
  <span class="token operator">-</span>x<span class="token punctuation">,</span><span class="token operator">--</span>expiration             <span class="token keyword">set</span> the time <span class="token keyword">in</span> seconds before a transaction expires<span class="token punctuation">,</span> defaults to 30s
  <span class="token operator">-</span>f<span class="token punctuation">,</span><span class="token operator">--</span>force<span class="token operator">-</span>unique           force the transaction to be unique<span class="token punctuation">.</span> <span class="token keyword">this</span> will consume extra bandwidth and remove any protections against accidently issuing the same transaction multiple times
</code></pre>
<h3 id="keosd"><a href="#keosd" class="headerlink" title="keosd"></a>keosd</h3><p>An EOSIO wallet【钱包】 daemon【进程】 that loads wallet related plugins【插件】, such as the HTTP interface【接口】 and RPC【远程过程调用】 API</p>
<h3 id="launcher【运行】"><a href="#launcher【运行】" class="headerlink" title="launcher【运行】"></a>launcher【运行】</h3><p>The launcher application simplifies【简化】 the distribution【分布】 of multiple【多个】 nodeos nodes across a LAN or a wider【更广】 network. It can be configured【配置】 via CLI to compose per-node configuration files, distribute these files securely【安全】 amongst the peer【点】 hosts and then start up the multiple instances【实例】 of nodeos.</p>
<h2 id="tools【工具】"><a href="#tools【工具】" class="headerlink" title="tools【工具】"></a>tools【工具】</h2><h3 id="eosiocpp"><a href="#eosiocpp" class="headerlink" title="eosiocpp"></a>eosiocpp</h3><p>Using eosiocpp to generate【生成】 the ABI specification file<br>eosiocpp can generate the ABI specification【规格】 file by inspecting【检查】 the content of types declared【声明】 in the contract【合约】 source code【源码】.</p>
<p>To indicate that a type must be exported【导出】 to the ABI (as an action or a table), the @abi annotation【标记】 must be used in the comment【评论】 attached to the type declaration【声明】.</p>
<p>The syntax【语法】 for the annotation is as following.</p>
<p>@abi action [name name2 … nameN]<br>@abi table [index_type name] To generate the ABI file, eosiocpp must be called with the -g option【选项】.</p>
<pre class=" language-js"><code class="language-js">➜ eosiocpp <span class="token operator">-</span>g abi<span class="token punctuation">.</span>json types<span class="token punctuation">.</span>hpp
Generated abi<span class="token punctuation">.</span>json <span class="token operator">...</span>
</code></pre>
<p>eosiocpp can also be used to generate【生成】 helper【辅助】 functions that serialize/deserialize【序列化】 the types defined【定义】 in the ABI spec.</p>
<pre class=" language-js"><code class="language-js">➜ eosiocpp <span class="token operator">-</span>g abi<span class="token punctuation">.</span>json <span class="token operator">-</span>gs types<span class="token punctuation">.</span>hpp
Generated abi<span class="token punctuation">.</span>json <span class="token operator">...</span>
Generated types<span class="token punctuation">.</span>gen<span class="token punctuation">.</span>hpp <span class="token operator">...</span>
</code></pre>
<h3 id="Examples【示例】"><a href="#Examples【示例】" class="headerlink" title="Examples【示例】"></a>Examples【示例】</h3><p>Declaring【声明】 an action</p>
<pre class=" language-js"><code class="language-js">#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>types<span class="token punctuation">.</span>hpp<span class="token operator">></span>
#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>string<span class="token punctuation">.</span>hpp<span class="token operator">></span>

<span class="token comment" spellcheck="true">//@abi action</span>
struct action_name <span class="token punctuation">{</span>
  uint64_t    param1<span class="token punctuation">;</span>
  uint64_t    param2<span class="token punctuation">;</span>
  eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>string param3<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token string">"types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"structs"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"action_name"</span><span class="token punctuation">,</span>
      <span class="token string">"base"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"param1"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span><span class="token punctuation">,</span>
        <span class="token string">"param2"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span><span class="token punctuation">,</span>
        <span class="token string">"param3"</span><span class="token punctuation">:</span> <span class="token string">"string"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"action_name"</span><span class="token punctuation">:</span> <span class="token string">"actionname"</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"action_name"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"tables"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Declaring multiple【多个】 actions using the same interface【接口】.</p>
<pre class=" language-js"><code class="language-js">#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>types<span class="token punctuation">.</span>hpp<span class="token operator">></span>
#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>string<span class="token punctuation">.</span>hpp<span class="token operator">></span>

<span class="token comment" spellcheck="true">//@abi action action1 action2</span>
struct action_name <span class="token punctuation">{</span>
  uint64_t param1<span class="token punctuation">;</span>
  uint64_t param2<span class="token punctuation">;</span>
  eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>string   param3<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token string">"types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"structs"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"action_name"</span><span class="token punctuation">,</span>
      <span class="token string">"base"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"param1"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span><span class="token punctuation">,</span>
        <span class="token string">"param2"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span><span class="token punctuation">,</span>
        <span class="token string">"param3"</span><span class="token punctuation">:</span> <span class="token string">"string"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"action_name"</span><span class="token punctuation">:</span> <span class="token string">"action1"</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"action_name"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token string">"action_name"</span><span class="token punctuation">:</span> <span class="token string">"action2"</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"action_name"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"tables"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Declaring a table【表格】</p>
<pre class=" language-js"><code class="language-js">#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>types<span class="token punctuation">.</span>hpp<span class="token operator">></span>
#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>string<span class="token punctuation">.</span>hpp<span class="token operator">></span>

<span class="token comment" spellcheck="true">//@abi table</span>
struct my_table <span class="token punctuation">{</span>
  uint64_t key<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token string">"types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"structs"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"my_table"</span><span class="token punctuation">,</span>
      <span class="token string">"base"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"key"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"tables"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"table_name"</span><span class="token punctuation">:</span> <span class="token string">"mytable"</span><span class="token punctuation">,</span>
      <span class="token string">"index_type"</span><span class="token punctuation">:</span> <span class="token string">"i64"</span><span class="token punctuation">,</span>
      <span class="token string">"key_names"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"key"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"key_types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"uint64"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"my_table"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Declaring【声明】 a table with explicit【清晰】 index type</p>
<p>*a struct【结构】 with 3 uint64_t can be both i64 or i64i64i64</p>
<pre class=" language-js"><code class="language-js">#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>types<span class="token punctuation">.</span>hpp<span class="token operator">></span>

<span class="token comment" spellcheck="true">//@abi table i64</span>
struct my_new_table <span class="token punctuation">{</span>
  uint64_t key<span class="token punctuation">;</span>
  uint64_t name<span class="token punctuation">;</span>
  uint64_t age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token string">"types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"structs"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"my_new_table"</span><span class="token punctuation">,</span>
      <span class="token string">"base"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"key"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span><span class="token punctuation">,</span>
        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span><span class="token punctuation">,</span>
        <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"tables"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"table_name"</span><span class="token punctuation">:</span> <span class="token string">"mynewtable"</span><span class="token punctuation">,</span>
      <span class="token string">"index_type"</span><span class="token punctuation">:</span> <span class="token string">"i64"</span><span class="token punctuation">,</span>
      <span class="token string">"key_names"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"key"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"key_types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"uint64"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"my_new_table"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Declaring a table【表格】 and an action【行为】 that use the same struct【结构】.</p>
<pre class=" language-js"><code class="language-js">#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>types<span class="token punctuation">.</span>hpp<span class="token operator">></span>
#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>string<span class="token punctuation">.</span>hpp<span class="token operator">></span>

<span class="token comment" spellcheck="true">/*
 * @abi table
 * @abi action
 */</span> 
struct my_type <span class="token punctuation">{</span>
  eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>string key<span class="token punctuation">;</span>
  eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>name value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token string">"types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"structs"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"my_type"</span><span class="token punctuation">,</span>
      <span class="token string">"base"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"key"</span><span class="token punctuation">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
        <span class="token string">"value"</span><span class="token punctuation">:</span> <span class="token string">"name"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"action_name"</span><span class="token punctuation">:</span> <span class="token string">"mytype"</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"my_type"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"tables"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"table_name"</span><span class="token punctuation">:</span> <span class="token string">"mytype"</span><span class="token punctuation">,</span>
      <span class="token string">"index_type"</span><span class="token punctuation">:</span> <span class="token string">"str"</span><span class="token punctuation">,</span>
      <span class="token string">"key_names"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"key"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"key_types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"string"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"my_type"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Example of typedef exporting【输出】</p>
<pre class=" language-js"><code class="language-js">#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>types<span class="token punctuation">.</span>hpp<span class="token operator">></span>
struct simple <span class="token punctuation">{</span>
  uint64_t u64<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

typedef simple simple_alias<span class="token punctuation">;</span>
typedef eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>name name_alias<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//@abi action</span>
struct action_one <span class="token punctuation">:</span> simple_alias <span class="token punctuation">{</span>
  uint32_t u32<span class="token punctuation">;</span>
  name_alias name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token string">"types"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"new_type_name"</span><span class="token punctuation">:</span> <span class="token string">"simple_alias"</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"simple"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token string">"new_type_name"</span><span class="token punctuation">:</span> <span class="token string">"name_alias"</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"name"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"structs"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"simple"</span><span class="token punctuation">,</span>
      <span class="token string">"base"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"u64"</span><span class="token punctuation">:</span> <span class="token string">"uint64"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"action_one"</span><span class="token punctuation">,</span>
      <span class="token string">"base"</span><span class="token punctuation">:</span> <span class="token string">"simple_alias"</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"u32"</span><span class="token punctuation">:</span> <span class="token string">"uint32"</span><span class="token punctuation">,</span>
        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"name_alias"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"action_name"</span><span class="token punctuation">:</span> <span class="token string">"actionone"</span><span class="token punctuation">,</span>
      <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"action_one"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"tables"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Using the generated【生成】<br>serialization/deserialization【序列化】 functions【函数】</p>
<pre class=" language-js"><code class="language-js">#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>types<span class="token punctuation">.</span>hpp<span class="token operator">></span>
#include <span class="token operator">&lt;</span>eoslib<span class="token operator">/</span>string<span class="token punctuation">.</span>hpp<span class="token operator">></span>

struct simple <span class="token punctuation">{</span>
  uint32_t u32<span class="token punctuation">;</span>
  fixed_string16 s16<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

struct my_complex_type <span class="token punctuation">{</span>
  uint64_t u64<span class="token punctuation">;</span>
  eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>string str<span class="token punctuation">;</span>
  simple simple<span class="token punctuation">;</span>
  bytes bytes<span class="token punctuation">;</span>
  public_key pub<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

typedef my_complex_type complex<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//@abi action</span>
struct test_action <span class="token punctuation">{</span>
  uint32_t u32<span class="token punctuation">;</span>
  complex cplx<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">apply</span><span class="token punctuation">(</span> uint64_t code<span class="token punctuation">,</span> uint64_t action <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span> code <span class="token operator">==</span> <span class="token function">N</span><span class="token punctuation">(</span>mycontract<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span> action <span class="token operator">==</span> <span class="token function">N</span><span class="token punctuation">(</span>testaction<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        auto msg <span class="token operator">=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>current_message<span class="token operator">&lt;</span>test_action<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        eosio<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"test_action content\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        eosio<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dump</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>

        bytes b <span class="token operator">=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>raw<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pack</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printhex</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>data<span class="token punctuation">,</span> b<span class="token punctuation">.</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>NOTE: table names and action names cannot【不能】 use an underscore (“_”).</p>
<h3 id="Calling【调用】-contract【合约】-with-test【测试】-values"><a href="#Calling【调用】-contract【合约】-with-test【测试】-values" class="headerlink" title="Calling【调用】 contract【合约】 with test【测试】 values"></a>Calling【调用】 contract【合约】 with test【测试】 values</h3><pre class=" language-js"><code class="language-js">cleos push message mycontract testaction <span class="token string">'{"u32":"1000", "cplx":{"u64":"472", "str":"hello", "bytes":"B0CA", "pub":"EOS8CY2pCW5THmzvPTgEh5WLEAxgpVFXaPogPvgvVpVWCYMRdzmwx", "simple":{"u32":"164","s16":"small-string"}}}'</span> <span class="token operator">-</span>S mycontract
</code></pre>
<p>Will produce【生成】 the following output in nodeos console</p>
<pre class=" language-js"><code class="language-js">test_action content
u32<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span>
cplx<span class="token punctuation">:</span><span class="token punctuation">[</span>
  u64<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">472</span><span class="token punctuation">]</span>
  str<span class="token punctuation">:</span><span class="token punctuation">[</span>hello<span class="token punctuation">]</span>
  simple<span class="token punctuation">:</span><span class="token punctuation">[</span>
    u32<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">164</span><span class="token punctuation">]</span>
    s16<span class="token punctuation">:</span><span class="token punctuation">[</span>small<span class="token operator">-</span>string<span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
  bytes<span class="token punctuation">:</span><span class="token punctuation">[</span>b0ca<span class="token punctuation">]</span>
  pub<span class="token punctuation">:</span><span class="token punctuation">[</span>03b41078f445628882fe8c1e629909cbbd67ff4b592b832264dac187ac730177f1<span class="token punctuation">]</span>
<span class="token punctuation">]</span>
e8030000d8010000000000000568656c6c6fa40000000c736d616c6c2d737472696e6702b0ca03b41078f445628882fe8c1e629909cbbd67ff4b592b832264dac187ac730177f1
</code></pre>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="/2018/05/21/online-eos-5/">« Local局部 En...</a></span>
  <span class="right"><a href="/2018/05/21/online-eos-7/">Accounts【账... »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年05月21日 19:05</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  online-eos-6
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

