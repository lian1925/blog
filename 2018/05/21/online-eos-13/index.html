
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  <link href="//vjs.zencdn.net/6.7/video-js.min.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/6.7/video.min.js"></script>
  
  <title>eosio token Contract【合约】 | 教程 | 小沙丘的网络漫游记</title>
 <meta name="description" content="" >

 <!-- 百度统计 -->
 <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?eafa0040e1ab3bed28ce82ef03de6e01";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/EOS/">
            EOS
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/EOS/">
              EOS
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/05/21/online-eos-12/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/05/21/online-eos-14/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/05/21/online-eos-12/">
                    Getting Started【启动】 With Contracts【合约】 | 教程
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/05/21/online-eos-14/">
                    Exchange【交换】 Deposit Withdraw | 教程
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>eosio token Contract【合约】 | 教程</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年05月21日 20:05
  </p>
</div>
</div>



  
  <div class="page">
      <h2 id="Eosio-token-Exchange-and-Eosio-msig-Contracts"><a href="#Eosio-token-Exchange-and-Eosio-msig-Contracts" class="headerlink" title="Eosio.token, Exchange, and Eosio.msig Contracts"></a>Eosio.token, Exchange, and Eosio.msig Contracts</h2><p>This tutorial assumes that you have completed the tutorial Getting Started With Contracts.</p>
<p>At this stage the blockchain doesn’t do much, so let’s deploy the eosio.token contract. This contract enables the creation of many different tokens all running on the same contract but potentially managed by different users.</p>
<p>Before we can deploy the token contract we must create an account to deploy it to.</p>
<pre class=" language-js"><code class="language-js">$ cleos create account eosio eosio<span class="token punctuation">.</span>token EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4
<span class="token operator">...</span>
</code></pre>
<p>Then we can deploy the contract which can be found in ${EOSIO_SOURCE}/build/contracts/eosio.token</p>
<pre class=" language-js"><code class="language-js">$ cleos <span class="token keyword">set</span> contract eosio<span class="token punctuation">.</span>token build<span class="token operator">/</span>contracts<span class="token operator">/</span>eosio<span class="token punctuation">.</span>token <span class="token operator">-</span>p eosio<span class="token punctuation">.</span>token
Reading WAST<span class="token operator">...</span>
Assembling WASM<span class="token operator">...</span>
Publishing contract<span class="token operator">...</span>
executed transaction<span class="token punctuation">:</span> 528bdbce1181dc5fd72a24e4181e6587dace8ab43b2d7ac9b22b2017992a07ad  <span class="token number">8708</span> bytes  <span class="token number">10000</span> cycles
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>setcode               <span class="token punctuation">{</span><span class="token string">"account"</span><span class="token punctuation">:</span><span class="token string">"eosio.token"</span><span class="token punctuation">,</span><span class="token string">"vmtype"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"vmversion"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"code"</span><span class="token punctuation">:</span>"0061736d0100000001ce011d60067f7e7f7f7f7f00<span class="token operator">...</span>
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>setabi                <span class="token punctuation">{</span><span class="token string">"account"</span><span class="token punctuation">:</span><span class="token string">"eosio.token"</span><span class="token punctuation">,</span><span class="token string">"abi"</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">"types"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"structs"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"transfer"</span><span class="token punctuation">,</span><span class="token string">"base"</span><span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"fields"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">...</span>
</code></pre>
<h2 id="Create-the-Currency-Token"><a href="#Create-the-Currency-Token" class="headerlink" title="Create the Currency Token"></a>Create the Currency Token</h2><p>You can view the interface to eosio.token as defined by contracts/eosio.token/eosio.token.hpp:</p>
<pre class=" language-js"><code class="language-js">   <span class="token keyword">void</span> <span class="token function">create</span><span class="token punctuation">(</span> account_name issuer<span class="token punctuation">,</span>
                asset        maximum_supply<span class="token punctuation">,</span>
                uint8_t      can_freeze<span class="token punctuation">,</span>
                uint8_t      can_recall<span class="token punctuation">,</span>
                uint8_t      can_whitelist <span class="token punctuation">)</span><span class="token punctuation">;</span>


   <span class="token keyword">void</span> <span class="token function">issue</span><span class="token punctuation">(</span> account_name to<span class="token punctuation">,</span> asset quantity<span class="token punctuation">,</span> string memo <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span> account_name <span class="token keyword">from</span><span class="token punctuation">,</span>
                  account_name to<span class="token punctuation">,</span>
                  asset        quantity<span class="token punctuation">,</span>
                  string       memo <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>To create a new token we must call the create(…) action with the proper arguments. This command will use the symbol of the maximum supply to uniquely identify this token from other tokens. The issuer will be the one with authority to call issue and or perform other actions such as freezing, recalling, and whitelisting of owners.</p>
<p>The concise way to call this method, using positional arguments:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action eosio<span class="token punctuation">.</span>token create <span class="token string">'[ "eosio", "1000000000.0000 SYS", 0, 0, 0]'</span> <span class="token operator">-</span>p eosio<span class="token punctuation">.</span>token
executed transaction<span class="token punctuation">:</span> 0e49a421f6e75f4c5e09dd738a02d3f51bd18a0cf31894f68d335cd70d9c0e12  <span class="token number">260</span> bytes  <span class="token number">1000</span> cycles
#   eosio<span class="token punctuation">.</span>token <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>create          <span class="token punctuation">{</span><span class="token string">"issuer"</span><span class="token punctuation">:</span><span class="token string">"eosio"</span><span class="token punctuation">,</span><span class="token string">"maximum_supply"</span><span class="token punctuation">:</span><span class="token string">"1000000000.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"can_freeze"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"can_recall"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>"can_whitelis<span class="token operator">...</span>
</code></pre>
<p>Alternatively, a more verbose way to call this method, using named arguments:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action eosio<span class="token punctuation">.</span>token create <span class="token string">'{"issuer":"eosio", "maximum_supply":"1000000000.0000 SYS", "can_freeze":0, "can_recall":0, "can_whitelist":0}'</span> <span class="token operator">-</span>p eosio<span class="token punctuation">.</span>token
executed transaction<span class="token punctuation">:</span> 0e49a421f6e75f4c5e09dd738a02d3f51bd18a0cf31894f68d335cd70d9c0e12  <span class="token number">260</span> bytes  <span class="token number">1000</span> cycles
#   eosio<span class="token punctuation">.</span>token <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>create          <span class="token punctuation">{</span><span class="token string">"issuer"</span><span class="token punctuation">:</span><span class="token string">"eosio"</span><span class="token punctuation">,</span><span class="token string">"maximum_supply"</span><span class="token punctuation">:</span><span class="token string">"1000000000.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"can_freeze"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"can_recall"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>"can_whitelis<span class="token operator">...</span>
</code></pre>
<p>This command created a new token SYS with a pecision of 4 decimials and a maximum supply of 1000000000.0000 SYS.</p>
<p>In order to create this token we required the permission of the eosio.token contract because it “owns” the symbol namespace (e.g. “SYS”). Future versions of this contract may allow other parties to buy symbol names automatically. For this reason we must pass -p eosio.token to authorize this call.</p>
<h2 id="Issue-Tokens-to-Account-“User”"><a href="#Issue-Tokens-to-Account-“User”" class="headerlink" title="Issue Tokens to Account “User”"></a>Issue Tokens to Account “User”</h2><p>Now that we have created the token, the issuer can issue new tokens to the account user we created earlier.</p>
<p>We will use the positional calling convention (vs named args).</p>
<pre class=" language-js"><code class="language-js">$ cleos push action eosio<span class="token punctuation">.</span>token issue <span class="token string">'[ "user", "100.0000 SYS", "memo" ]'</span> <span class="token operator">-</span>p eosio
executed transaction<span class="token punctuation">:</span> 822a607a9196112831ecc2dc14ffb1722634f1749f3ac18b73ffacd41160b019  <span class="token number">268</span> bytes  <span class="token number">1000</span> cycles
#   eosio<span class="token punctuation">.</span>token <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>issue           <span class="token punctuation">{</span><span class="token string">"to"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"quantity"</span><span class="token punctuation">:</span><span class="token string">"100.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"memo"</span><span class="token punctuation">:</span><span class="token string">"memo"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> issue
#   eosio<span class="token punctuation">.</span>token <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>transfer        <span class="token punctuation">{</span><span class="token string">"from"</span><span class="token punctuation">:</span><span class="token string">"eosio"</span><span class="token punctuation">,</span><span class="token string">"to"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"quantity"</span><span class="token punctuation">:</span><span class="token string">"100.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"memo"</span><span class="token punctuation">:</span><span class="token string">"memo"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> transfer
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>transfer        <span class="token punctuation">{</span><span class="token string">"from"</span><span class="token punctuation">:</span><span class="token string">"eosio"</span><span class="token punctuation">,</span><span class="token string">"to"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"quantity"</span><span class="token punctuation">:</span><span class="token string">"100.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"memo"</span><span class="token punctuation">:</span><span class="token string">"memo"</span><span class="token punctuation">}</span>
#          user <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>transfer        <span class="token punctuation">{</span><span class="token string">"from"</span><span class="token punctuation">:</span><span class="token string">"eosio"</span><span class="token punctuation">,</span><span class="token string">"to"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"quantity"</span><span class="token punctuation">:</span><span class="token string">"100.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"memo"</span><span class="token punctuation">:</span><span class="token string">"memo"</span><span class="token punctuation">}</span>
</code></pre>
<p>This time the output contains several different actions: one issue and three transfers. While the only action we signed was issue, the issue action performed an “inline transfer” and the “inline transfer” notified the sender and receiver accounts. The output indicates all of the action handlers that were called, the order they were called in, and whether or not any output was generated by the action.</p>
<p>Technically, the eosio.token contract could have skipped the inline transfer and opted to just modify the balances directly. However, in this case, the eosio.token contract is following our token convention that requires that all account balances be derivable by the sum of the transfer actions that reference them. It also requires that the sender and receiver of funds be notified so they can automate handling deposits and withdrawals.</p>
<p>If you want to see the actual transaction that was broadcast, you can use the -d -j options to indicate “don’t broadcast” and “return transaction as json”.</p>
<pre class=" language-js"><code class="language-js">$ cleos push action eosio<span class="token punctuation">.</span>token issue <span class="token string">'["user", "100.0000 SYS", "memo"]'</span> <span class="token operator">-</span>p eosio <span class="token operator">-</span>d <span class="token operator">-</span>j
<span class="token punctuation">{</span>
  <span class="token string">"expiration"</span><span class="token punctuation">:</span> <span class="token string">"2018-04-01T15:20:44"</span><span class="token punctuation">,</span>
  <span class="token string">"region"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token string">"ref_block_num"</span><span class="token punctuation">:</span> <span class="token number">42580</span><span class="token punctuation">,</span>
  <span class="token string">"ref_block_prefix"</span><span class="token punctuation">:</span> <span class="token number">3987474256</span><span class="token punctuation">,</span>
  <span class="token string">"net_usage_words"</span><span class="token punctuation">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  <span class="token string">"kcpu_usage"</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token string">"delay_sec"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token string">"context_free_actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"actions"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"account"</span><span class="token punctuation">:</span> <span class="token string">"eosio.token"</span><span class="token punctuation">,</span>
      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"issue"</span><span class="token punctuation">,</span>
      <span class="token string">"authorization"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token string">"actor"</span><span class="token punctuation">:</span> <span class="token string">"eosio"</span><span class="token punctuation">,</span>
          <span class="token string">"permission"</span><span class="token punctuation">:</span> <span class="token string">"active"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token string">"00000000007015d640420f000000000004454f5300000000046d656d6f"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"signatures"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">"EOSJzPywCKsgBitRh9kxFNeMJc8BeD6QZLagtXzmdS2ib5gKTeELiVxXvcnrdRUiY3ExP9saVkdkzvUNyRZSXj2CLJnj7U42H"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"context_free_data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="Transfer-Tokens-to-Account-“Tester”"><a href="#Transfer-Tokens-to-Account-“Tester”" class="headerlink" title="Transfer Tokens to Account “Tester”"></a>Transfer Tokens to Account “Tester”</h2><p>Now that account user has tokens, we will transfer some to account tester. We indicate that user authorized this action using the permission argument -p user.</p>
<pre class=" language-js"><code class="language-js">$ cleos push action eosio<span class="token punctuation">.</span>token transfer <span class="token string">'[ "user", "tester", "25.0000 SYS", "m" ]'</span> <span class="token operator">-</span>p user
executed transaction<span class="token punctuation">:</span> 06d0a99652c11637230d08a207520bf38066b8817ef7cafaab2f0344aafd7018  <span class="token number">268</span> bytes  <span class="token number">1000</span> cycles
#   eosio<span class="token punctuation">.</span>token <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>transfer        <span class="token punctuation">{</span><span class="token string">"from"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"to"</span><span class="token punctuation">:</span><span class="token string">"tester"</span><span class="token punctuation">,</span><span class="token string">"quantity"</span><span class="token punctuation">:</span><span class="token string">"25.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"memo"</span><span class="token punctuation">:</span><span class="token string">"m"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> transfer
#          user <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>transfer        <span class="token punctuation">{</span><span class="token string">"from"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"to"</span><span class="token punctuation">:</span><span class="token string">"tester"</span><span class="token punctuation">,</span><span class="token string">"quantity"</span><span class="token punctuation">:</span><span class="token string">"25.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"memo"</span><span class="token punctuation">:</span><span class="token string">"m"</span><span class="token punctuation">}</span>
#        tester <span class="token operator">&lt;=</span> eosio<span class="token punctuation">.</span>token<span class="token punctuation">:</span><span class="token punctuation">:</span>transfer        <span class="token punctuation">{</span><span class="token string">"from"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"to"</span><span class="token punctuation">:</span><span class="token string">"tester"</span><span class="token punctuation">,</span><span class="token string">"quantity"</span><span class="token punctuation">:</span><span class="token string">"25.0000 SYS"</span><span class="token punctuation">,</span><span class="token string">"memo"</span><span class="token punctuation">:</span><span class="token string">"m"</span><span class="token punctuation">}</span>
</code></pre>
<h2 id="Deploy-Exchange-Contract"><a href="#Deploy-Exchange-Contract" class="headerlink" title="Deploy Exchange Contract"></a>Deploy Exchange Contract</h2><p>Similar to the examples shown above, we can deploy the exchange contract. The exchange contract provides capabilities to create and trade currency. It is assumed this is being run from the root of the EOSIO source.</p>
<pre class=" language-js"><code class="language-js">$ cleos create account eosio exchange  EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4
executed transaction<span class="token punctuation">:</span> 4d38de16631a2dc698f1d433f7eb30982d855219e7c7314a888efbbba04e571c  <span class="token number">364</span> bytes  <span class="token number">1000</span> cycles
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>newaccount            <span class="token punctuation">{</span><span class="token string">"creator"</span><span class="token punctuation">:</span><span class="token string">"eosio"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"exchange"</span><span class="token punctuation">,</span><span class="token string">"owner"</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">"threshold"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"keys"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"key"</span><span class="token punctuation">:</span>"EOS7ijWCBmoXBi3CgtK7DJxe<span class="token operator">...</span>

$ cleos <span class="token keyword">set</span> contract exchange build<span class="token operator">/</span>contracts<span class="token operator">/</span>exchange <span class="token operator">-</span>p exchange
Reading WAST<span class="token operator">...</span>
Assembling WASM<span class="token operator">...</span>
Publishing contract<span class="token operator">...</span>
executed transaction<span class="token punctuation">:</span> 5a63b4de8a1da415590778f163c5ed26dc164c960185b20fd834c297cf7fa8f4  <span class="token number">35172</span> bytes  <span class="token number">10000</span> cycles
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>setcode               <span class="token punctuation">{</span><span class="token string">"account"</span><span class="token punctuation">:</span><span class="token string">"exchange"</span><span class="token punctuation">,</span><span class="token string">"vmtype"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"vmversion"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"code"</span><span class="token punctuation">:</span>"0061736d0100000001f0023460067f7e7f7f7f7f00600<span class="token operator">...</span>
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>setabi                <span class="token punctuation">{</span><span class="token string">"account"</span><span class="token punctuation">:</span><span class="token string">"exchange"</span><span class="token punctuation">,</span><span class="token string">"abi"</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">"types"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"new_type_name"</span><span class="token punctuation">:</span><span class="token string">"account_name"</span><span class="token punctuation">,</span><span class="token string">"type"</span><span class="token punctuation">:</span><span class="token string">"name"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"structs"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>"n<span class="token operator">...</span>
</code></pre>
<h2 id="Deploy-Eosio-msig-Contract"><a href="#Deploy-Eosio-msig-Contract" class="headerlink" title="Deploy Eosio.msig Contract"></a>Deploy Eosio.msig Contract</h2><p>The eosio.msig contract allows multiple parties to sign a single transaction asynchronously. EOSIO has multi-signature (multisig) support at a base level, but it requires a synchronous side channel where data is ferried around and signed. Eosio.msig is a more user friendly way of asynchronously proposing, approving and eventually publishing a transaction with multiple parties’ consent.</p>
<p>The following steps can be used to deploy the eosio.msig contract.</p>
<pre class=" language-js"><code class="language-js">$ cleos create account eosio eosio<span class="token punctuation">.</span>msig  EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>newaccount            <span class="token punctuation">{</span><span class="token string">"creator"</span><span class="token punctuation">:</span><span class="token string">"eosio"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"eosio.msig"</span><span class="token punctuation">,</span><span class="token string">"owner"</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">"threshold"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"keys"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"key"</span><span class="token punctuation">:</span>"EOS7ijWCBmoXBi3CgtK7DJ<span class="token operator">...</span>

$ cleos <span class="token keyword">set</span> contract eosio<span class="token punctuation">.</span>msig build<span class="token operator">/</span>contracts<span class="token operator">/</span>eosio<span class="token punctuation">.</span>msig <span class="token operator">-</span>p eosio<span class="token punctuation">.</span>msig
Reading WAST<span class="token operator">...</span>
Assembling WASM<span class="token operator">...</span>
Publishing contract<span class="token operator">...</span>
executed transaction<span class="token punctuation">:</span> a113a7db8c878dfd894671792770b59a04efb3aa8295f5b3d585daf89c314ec9  <span class="token number">8964</span> bytes  <span class="token number">10000</span> cycles
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>setcode               <span class="token punctuation">{</span><span class="token string">"account"</span><span class="token punctuation">:</span><span class="token string">"eosio.msig"</span><span class="token punctuation">,</span><span class="token string">"vmtype"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"vmversion"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"code"</span><span class="token punctuation">:</span>"0061736d0100000001bd011b60047f7e7e7f0060047<span class="token operator">...</span>
#         eosio <span class="token operator">&lt;=</span> eosio<span class="token punctuation">:</span><span class="token punctuation">:</span>setabi                <span class="token punctuation">{</span><span class="token string">"account"</span><span class="token punctuation">:</span><span class="token string">"eosio.msig"</span><span class="token punctuation">,</span><span class="token string">"abi"</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">"types"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"new_type_name"</span><span class="token punctuation">:</span><span class="token string">"account_name"</span><span class="token punctuation">,</span><span class="token string">"type"</span><span class="token punctuation">:</span><span class="token string">"name"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>"new_type_na<span class="token operator">...</span>
</code></pre>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="/2018/05/21/online-eos-12/">« Getting St...</a></span>
  <span class="right"><a href="/2018/05/21/online-eos-14/">Exchange【交... »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年05月21日 20:05</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  online-eos-13
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

