
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  <link href="//vjs.zencdn.net/6.7/video-js.min.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/6.7/video.min.js"></script>
  
  <title>Hello World Contract【合约】 | 小沙丘的网络漫游记</title>
 <meta name="description" content="" >

 <!-- 百度统计 -->
 <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?eafa0040e1ab3bed28ce82ef03de6e01";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/EOS/">
            EOS
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/EOS/">
              EOS
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/05/21/online-eos-14/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/05/21/online-eos-16/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/05/21/online-eos-14/">
                    Exchange Deposit Withdraw | 教程
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/05/21/online-eos-16/">
                    Comprehensive Accounts and Wallets
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>Hello World Contract【合约】</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年05月21日 20:05
  </p>
</div>
</div>



  
  <div class="page">
      <h2 id="Hello-World-Contract【合约】"><a href="#Hello-World-Contract【合约】" class="headerlink" title="Hello World Contract【合约】"></a>Hello World Contract【合约】</h2><p>This tutorial assumes【假想】 that you have completed tutorials Getting Started With Contracts【合约】 and Eosio.token【令牌】, Exchange【交换】, and Eosio.msig Contracts【合约】.</p>
<p>We will now create our first “hello world” contract. Create a new folder called “hello”, cd into the folder, then create a file “hello.cpp” with the following contents【内容】:</p>
<p>hello/hello.cpp</p>
<pre class=" language-CPP"><code class="language-CPP">#include <eosiolib/eosio.hpp>
#include <eosiolib/print.hpp>
using namespace eosio;

class hello : public eosio::contract {
  public:
      using contract::contract;

      /// @abi action 
      void hi( account_name user ) {
         print( "Hello, ", name{user} );
      }
};

EOSIO_ABI( hello, (hi) )
</code></pre>
<p>You can compile【编译】 your code to web assembly (.wast) as follows:</p>
<pre class=" language-js"><code class="language-js">$ eosiocpp <span class="token operator">-</span>o hello<span class="token punctuation">.</span>wast hello<span class="token punctuation">.</span>cpp
</code></pre>
<p>NOTE: The compiler might generate【生成】 warnings. These can be safely ignored.</p>
<p>Now generate【生成】 the abi:</p>
<pre class=" language-js"><code class="language-js">$ eosiocpp <span class="token operator">-</span>g hello<span class="token punctuation">.</span>abi hello<span class="token punctuation">.</span>cpp
Generated hello<span class="token punctuation">.</span>abi
</code></pre>
<p>Create an account【账户】 and upload【上传】 the contract:</p>
<pre class=" language-js"><code class="language-js">$ cleos create account eosio hello<span class="token punctuation">.</span>code EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4
<span class="token operator">...</span>
$ cleos <span class="token keyword">set</span> contract hello<span class="token punctuation">.</span>code <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>hello <span class="token operator">-</span>p hello<span class="token punctuation">.</span>code
<span class="token operator">...</span>
</code></pre>
<p>Now we can run the contract:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["user"]'</span> <span class="token operator">-</span>p user
executed transaction<span class="token punctuation">:</span> 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857  <span class="token number">244</span> bytes  <span class="token number">1000</span> cycles
#    hello<span class="token punctuation">.</span>code <span class="token operator">&lt;=</span> hello<span class="token punctuation">.</span>code<span class="token punctuation">:</span><span class="token punctuation">:</span>hi               <span class="token punctuation">{</span><span class="token string">"user"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> Hello<span class="token punctuation">,</span> user
</code></pre>
<p>At this time the contract allows anyone to authorize it, we could also say:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["user"]'</span> <span class="token operator">-</span>p tester
executed transaction<span class="token punctuation">:</span> 28d92256c8ffd8b0255be324e4596b7c745f50f85722d0c4400471bc184b9a16  <span class="token number">244</span> bytes  <span class="token number">1000</span> cycles
#    hello<span class="token punctuation">.</span>code <span class="token operator">&lt;=</span> hello<span class="token punctuation">.</span>code<span class="token punctuation">:</span><span class="token punctuation">:</span>hi               <span class="token punctuation">{</span><span class="token string">"user"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> Hello<span class="token punctuation">,</span> user
</code></pre>
<p>In this case tester is the one who authorized it and user is just an argument【参数】. If we want our contact to authenticate the user we are saying “hi” to, then we need to modify【修改】 the contract to require authentication.</p>
<p>Modify the hi() function in hello.cpp as follows:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span> account_name user <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">require_auth</span><span class="token punctuation">(</span> user <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">print</span><span class="token punctuation">(</span> <span class="token string">"Hello, "</span><span class="token punctuation">,</span> name<span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Repeat the steps to compile the wast file and generate the abi, then set the contract again to deploy the update.</p>
<p>Now if we attempt to mismatch【不匹配】 the user and the authority, the contract will throw an error:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["tester"]'</span> <span class="token operator">-</span>p user
Error <span class="token number">3030001</span><span class="token punctuation">:</span> missing required authority
Ensure that you have the related authority inside your transaction<span class="token operator">!</span><span class="token punctuation">;</span>
If you are currently using <span class="token string">'cleos push action'</span> command<span class="token punctuation">,</span> <span class="token keyword">try</span> to add the relevant authority using <span class="token operator">-</span>p option<span class="token punctuation">.</span>
Error Details<span class="token punctuation">:</span>
missing authority <span class="token keyword">of</span> tester
</code></pre>
<p>We can fix this by giving the permission of tester:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["tester"]'</span> <span class="token operator">-</span>p tester
executed transaction<span class="token punctuation">:</span> 235bd766c2097f4a698cfb948eb2e709532df8d18458b92c9c6aae74ed8e4518  <span class="token number">244</span> bytes  <span class="token number">1000</span> cycles
#    hello<span class="token punctuation">.</span>code <span class="token operator">&lt;=</span> hello<span class="token punctuation">.</span>code<span class="token punctuation">:</span><span class="token punctuation">:</span>hi               <span class="token punctuation">{</span><span class="token string">"user"</span><span class="token punctuation">:</span><span class="token string">"tester"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> Hello<span class="token punctuation">,</span> tester
</code></pre>
<h2 id="Hello-World-Ricardian-Contract【合约】"><a href="#Hello-World-Ricardian-Contract【合约】" class="headerlink" title="Hello World Ricardian Contract【合约】"></a>Hello World Ricardian Contract【合约】</h2><p>Every smart contract must have a matching Ricardian contract. The Ricardian Contract specifies the legally binding behavior associated with each action of the smart contract. The Ricardian Contract for the Hello World Contract is listed here.</p>
<pre class=" language-js"><code class="language-js">## CONTRACT FOR HELLO WORLD

### Parameters
Input parameters<span class="token punctuation">:</span> NONE

Implied parameters<span class="token punctuation">:</span> 

<span class="token operator">*</span> _<span class="token operator">**</span>account_name<span class="token operator">**</span>_ <span class="token punctuation">(</span>name <span class="token keyword">of</span> the party invoking and signing the contract<span class="token punctuation">)</span>

### Intent【意图】
INTENT<span class="token punctuation">.</span> The intention <span class="token keyword">of</span> the author and the invoker <span class="token keyword">of</span> <span class="token keyword">this</span> contract is to print output<span class="token punctuation">.</span> It shall have no other effect<span class="token punctuation">.</span>

### Term
TERM<span class="token punctuation">.</span> This Contract expires at the conclusion <span class="token keyword">of</span> code execution<span class="token punctuation">.</span>

### Warranty
WARRANTY<span class="token punctuation">.</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> account_name <span class="token punctuation">}</span><span class="token punctuation">}</span> shall uphold its Obligations under <span class="token keyword">this</span> Contract <span class="token keyword">in</span> a timely and workmanlike manner<span class="token punctuation">,</span> using knowledge and recommendations <span class="token keyword">for</span> performing the services which meet generally acceptable standards <span class="token keyword">set</span> forth by EOSIO Blockchain Block Producers<span class="token punctuation">.</span>

### Default
DEFAULT<span class="token punctuation">.</span> The occurrence <span class="token keyword">of</span> any <span class="token keyword">of</span> the following shall constitute a material <span class="token keyword">default</span> under <span class="token keyword">this</span> Contract<span class="token punctuation">:</span> 

### Remedies
REMEDIES<span class="token punctuation">.</span> In addition to any and all other rights a party may have available according to law<span class="token punctuation">,</span> <span class="token keyword">if</span> a party defaults by failing to substantially perform any provision<span class="token punctuation">,</span> term or condition <span class="token keyword">of</span> <span class="token keyword">this</span> Contract<span class="token punctuation">,</span> the other party may terminate the Contract by providing written notice to the defaulting party<span class="token punctuation">.</span> This notice shall describe <span class="token keyword">with</span> sufficient detail the nature <span class="token keyword">of</span> the <span class="token keyword">default</span><span class="token punctuation">.</span> The party receiving such notice shall promptly be removed <span class="token keyword">from</span> being a Block Producer and <span class="token keyword">this</span> Contract shall be automatically terminated<span class="token punctuation">.</span> 

### Force Majeure
FORCE MAJEURE<span class="token punctuation">.</span> If performance <span class="token keyword">of</span> <span class="token keyword">this</span> Contract or any obligation under <span class="token keyword">this</span> Contract is prevented<span class="token punctuation">,</span> restricted<span class="token punctuation">,</span> or interfered <span class="token keyword">with</span> by causes beyond either party's reasonable control <span class="token punctuation">(</span><span class="token string">"Force Majeure"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> and <span class="token keyword">if</span> the party unable to carry out its obligations gives the other party prompt written notice <span class="token keyword">of</span> such event<span class="token punctuation">,</span> then the obligations <span class="token keyword">of</span> the party invoking <span class="token keyword">this</span> provision shall be suspended to the extent necessary by such event<span class="token punctuation">.</span> The term Force Majeure shall include<span class="token punctuation">,</span> without limitation<span class="token punctuation">,</span> acts <span class="token keyword">of</span> God<span class="token punctuation">,</span> fire<span class="token punctuation">,</span> explosion<span class="token punctuation">,</span> vandalism<span class="token punctuation">,</span> storm or other similar occurrence<span class="token punctuation">,</span> orders or acts <span class="token keyword">of</span> military or civil authority<span class="token punctuation">,</span> or by national emergencies<span class="token punctuation">,</span> insurrections<span class="token punctuation">,</span> riots<span class="token punctuation">,</span> or wars<span class="token punctuation">,</span> or strikes<span class="token punctuation">,</span> lock<span class="token operator">-</span>outs<span class="token punctuation">,</span> work stoppages<span class="token punctuation">,</span> or supplier failures<span class="token punctuation">.</span> The excused party shall use reasonable efforts under the circumstances to avoid or remove such causes <span class="token keyword">of</span> non<span class="token operator">-</span>performance and shall proceed to perform <span class="token keyword">with</span> reasonable dispatch whenever such causes are removed or ceased<span class="token punctuation">.</span> An act or omission shall be deemed within the reasonable control <span class="token keyword">of</span> a party <span class="token keyword">if</span> committed<span class="token punctuation">,</span> omitted<span class="token punctuation">,</span> or caused by such party<span class="token punctuation">,</span> or its employees<span class="token punctuation">,</span> officers<span class="token punctuation">,</span> agents<span class="token punctuation">,</span> or affiliates<span class="token punctuation">.</span> 

### Dispute Resolution
DISPUTE RESOLUTION<span class="token punctuation">.</span> Any controversies or disputes arising out <span class="token keyword">of</span> or relating to <span class="token keyword">this</span> Contract will be resolved by binding arbitration under the <span class="token keyword">default</span> rules <span class="token keyword">set</span> forth by the EOSIO Blockchain<span class="token punctuation">.</span> The arbitrator's award will be final<span class="token punctuation">,</span> and judgment may be entered upon it by any court having proper jurisdiction<span class="token punctuation">.</span> 

### Entire Agreement
ENTIRE AGREEMENT<span class="token punctuation">.</span> This Contract contains the entire agreement <span class="token keyword">of</span> the parties<span class="token punctuation">,</span> and there are no other promises or conditions <span class="token keyword">in</span> any other agreement whether oral or written concerning the subject matter <span class="token keyword">of</span> <span class="token keyword">this</span> Contract<span class="token punctuation">.</span> This Contract supersedes any prior written or oral agreements between the parties<span class="token punctuation">.</span> 

### Severability
SEVERABILITY<span class="token punctuation">.</span> If any provision <span class="token keyword">of</span> <span class="token keyword">this</span> Contract will be held to be invalid or unenforceable <span class="token keyword">for</span> any reason<span class="token punctuation">,</span> the remaining provisions will <span class="token keyword">continue</span> to be valid and enforceable<span class="token punctuation">.</span> If a court finds that any provision <span class="token keyword">of</span> <span class="token keyword">this</span> Contract is invalid or unenforceable<span class="token punctuation">,</span> but that by limiting such provision it would become valid and enforceable<span class="token punctuation">,</span> then such provision will be deemed to be written<span class="token punctuation">,</span> construed<span class="token punctuation">,</span> and enforced <span class="token keyword">as</span> so limited<span class="token punctuation">.</span> 

### Amendment
AMENDMENT<span class="token punctuation">.</span> This Contract may be modified or amended <span class="token keyword">in</span> writing by mutual agreement between the parties<span class="token punctuation">,</span> <span class="token keyword">if</span> the writing is signed by the party obligated under the amendment<span class="token punctuation">.</span> 

### Governing Law
GOVERNING LAW<span class="token punctuation">.</span> This Contract shall be construed <span class="token keyword">in</span> accordance <span class="token keyword">with</span> the Maxims <span class="token keyword">of</span> Equity<span class="token punctuation">.</span> 

### Notice
NOTICE<span class="token punctuation">.</span> Any notice or communication required or permitted under <span class="token keyword">this</span> Contract shall be sufficiently given <span class="token keyword">if</span> delivered to a verifiable email address or to such other email address <span class="token keyword">as</span> one party may have publicly furnished <span class="token keyword">in</span> writing<span class="token punctuation">,</span> or published on a broadcast contract provided by <span class="token keyword">this</span> blockchain <span class="token keyword">for</span> purposes <span class="token keyword">of</span> providing notices <span class="token keyword">of</span> <span class="token keyword">this</span> type<span class="token punctuation">.</span> 

### Waiver <span class="token keyword">of</span> Contractual Right
WAIVER OF CONTRACTUAL RIGHT<span class="token punctuation">.</span> The failure <span class="token keyword">of</span> either party to enforce any provision <span class="token keyword">of</span> <span class="token keyword">this</span> Contract shall not be construed <span class="token keyword">as</span> a waiver or limitation <span class="token keyword">of</span> that party's right to subsequently enforce and compel strict compliance <span class="token keyword">with</span> every provision <span class="token keyword">of</span> <span class="token keyword">this</span> Contract<span class="token punctuation">.</span> 

### Arbitrator's Fees to Prevailing Party
ARBITRATOR’S FEES TO PREVAILING PARTY<span class="token punctuation">.</span> In any action arising hereunder or any separate action pertaining to the validity <span class="token keyword">of</span> <span class="token keyword">this</span> Agreement<span class="token punctuation">,</span> both sides shall pay half the initial cost <span class="token keyword">of</span> arbitration<span class="token punctuation">,</span> and the prevailing party shall be awarded reasonable arbitrator's fees and costs<span class="token punctuation">.</span>

### Construction and Interpretation
CONSTRUCTION AND INTERPRETATION<span class="token punctuation">.</span> The rule requiring construction or interpretation against the drafter is waived<span class="token punctuation">.</span> The document shall be deemed <span class="token keyword">as</span> <span class="token keyword">if</span> it were drafted by both parties <span class="token keyword">in</span> a mutual effort<span class="token punctuation">.</span> 

### In Witness Whereof
IN WITNESS WHEREOF<span class="token punctuation">,</span> the parties hereto have caused <span class="token keyword">this</span> Agreement to be executed by themselves or their duly authorized representatives <span class="token keyword">as</span> <span class="token keyword">of</span> the date <span class="token keyword">of</span> execution<span class="token punctuation">,</span> and authorized <span class="token keyword">as</span> proven by the cryptographic signature on the transaction that invokes <span class="token keyword">this</span> contract<span class="token punctuation">.</span>
</code></pre>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="/2018/05/21/online-eos-14/">« Exchange D...</a></span>
  <span class="right"><a href="/2018/05/21/online-eos-16/">Comprehens... »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年05月21日 20:05</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  online-eos-15
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

