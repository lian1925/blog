
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  <link href="//vjs.zencdn.net/6.7/video-js.min.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/6.7/video.min.js"></script>
  
  <title>Hello World Contract【合约】 | 小沙丘的网络漫游记</title>
 <meta name="description" content="" >

 <!-- 百度统计 -->
 <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?eafa0040e1ab3bed28ce82ef03de6e01";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/EOS/">
            EOS
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/EOS/">
              EOS
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/05/21/online-eos-14/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/05/21/online-eos-16/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/05/21/online-eos-14/">
                    Exchange【交换】 Deposit Withdraw
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/05/21/online-eos-16/">
                    Comprehensive【理解】 Accounts【账户】 and Wallets【钱包】
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>Hello World Contract【合约】</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年05月21日 20:05
  </p>
</div>
</div>



  
  <div class="page">
      <h2 id="Hello-World-Contract【合约】"><a href="#Hello-World-Contract【合约】" class="headerlink" title="Hello World Contract【合约】"></a>Hello World Contract【合约】</h2><p>This tutorial assumes【假设】 that you have completed【完成】 tutorials Getting Started【起步】 With Contracts【合约】 and Eosio.token【令牌】, Exchange【交换】, and Eosio.msig Contracts【合约】.</p>
<p>We will now create【创建】 our first “hello world” contract. Create a new【新】 folder called “hello”, cd into the folder【文件夹】, then create【创建】 a file “hello.cpp” with the following contents【内容】:</p>
<p>hello/hello.cpp</p>
<pre class=" language-CPP"><code class="language-CPP">#include <eosiolib/eosio.hpp>
#include <eosiolib/print.hpp>
using namespace eosio;

class hello : public eosio::contract {
  public:
      using contract::contract;

      /// @abi action 
      void hi( account_name user ) {
         print( "Hello, ", name{user} );
      }
};

EOSIO_ABI( hello, (hi) )
</code></pre>
<p>You can compile【编译】 your code to web assembly (.wast) as follows【如下】:</p>
<pre class=" language-js"><code class="language-js">$ eosiocpp <span class="token operator">-</span>o hello<span class="token punctuation">.</span>wast hello<span class="token punctuation">.</span>cpp
</code></pre>
<p>NOTE: The compiler might generate【生成】 warnings【警告】. These can be safely【安全】 ignored【忽略】.</p>
<p>Now generate【生成】 the abi:</p>
<pre class=" language-js"><code class="language-js">$ eosiocpp <span class="token operator">-</span>g hello<span class="token punctuation">.</span>abi hello<span class="token punctuation">.</span>cpp
Generated hello<span class="token punctuation">.</span>abi
</code></pre>
<p>Create an account【账户】 and upload【上传】 the contract【合约】:</p>
<pre class=" language-js"><code class="language-js">$ cleos create account eosio hello<span class="token punctuation">.</span>code EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4
<span class="token operator">...</span>
$ cleos <span class="token keyword">set</span> contract hello<span class="token punctuation">.</span>code <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>hello <span class="token operator">-</span>p hello<span class="token punctuation">.</span>code
<span class="token operator">...</span>
</code></pre>
<p>Now we can run【运行】 the contract【合约】:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["user"]'</span> <span class="token operator">-</span>p user
executed transaction<span class="token punctuation">:</span> 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857  <span class="token number">244</span> bytes  <span class="token number">1000</span> cycles
#    hello<span class="token punctuation">.</span>code <span class="token operator">&lt;=</span> hello<span class="token punctuation">.</span>code<span class="token punctuation">:</span><span class="token punctuation">:</span>hi               <span class="token punctuation">{</span><span class="token string">"user"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> Hello<span class="token punctuation">,</span> user
</code></pre>
<p>At this time the contract【合约】 allows【允许】 anyone to authorize【授权】 it, we could also say:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["user"]'</span> <span class="token operator">-</span>p tester
executed transaction<span class="token punctuation">:</span> 28d92256c8ffd8b0255be324e4596b7c745f50f85722d0c4400471bc184b9a16  <span class="token number">244</span> bytes  <span class="token number">1000</span> cycles
#    hello<span class="token punctuation">.</span>code <span class="token operator">&lt;=</span> hello<span class="token punctuation">.</span>code<span class="token punctuation">:</span><span class="token punctuation">:</span>hi               <span class="token punctuation">{</span><span class="token string">"user"</span><span class="token punctuation">:</span><span class="token string">"user"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> Hello<span class="token punctuation">,</span> user
</code></pre>
<p>In this case tester is the one who authorized【授权】 it and user is just an argument【参数】. If we want our contact to authenticate【鉴定】 the user we are saying “hi” to, then we need to modify【修改】 the contract to require authentication.</p>
<p>Modify【修改】 the hi() function in hello.cpp as follows:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span> account_name user <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">require_auth</span><span class="token punctuation">(</span> user <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">print</span><span class="token punctuation">(</span> <span class="token string">"Hello, "</span><span class="token punctuation">,</span> name<span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Repeat【重复】 the steps to compile【编译】 the wast file and generate【生成】 the abi, then set the contract again to deploy【部署】 the update【更新】.</p>
<p>Now if we attempt to【试图】 mismatch【不匹配】 the user and the authority, the contract will throw【抛出】 an error【错误】:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["tester"]'</span> <span class="token operator">-</span>p user
Error <span class="token number">3030001</span><span class="token punctuation">:</span> missing required authority
Ensure that you have the related authority inside your transaction<span class="token operator">!</span><span class="token punctuation">;</span>
If you are currently using <span class="token string">'cleos push action'</span> command<span class="token punctuation">,</span> <span class="token keyword">try</span> to add the relevant authority using <span class="token operator">-</span>p option<span class="token punctuation">.</span>
Error Details<span class="token punctuation">:</span>
missing authority <span class="token keyword">of</span> tester
</code></pre>
<p>We can fix【修复】 this by giving the permission【许可】 of tester:</p>
<pre class=" language-js"><code class="language-js">$ cleos push action hello<span class="token punctuation">.</span>code hi <span class="token string">'["tester"]'</span> <span class="token operator">-</span>p tester
executed transaction<span class="token punctuation">:</span> 235bd766c2097f4a698cfb948eb2e709532df8d18458b92c9c6aae74ed8e4518  <span class="token number">244</span> bytes  <span class="token number">1000</span> cycles
#    hello<span class="token punctuation">.</span>code <span class="token operator">&lt;=</span> hello<span class="token punctuation">.</span>code<span class="token punctuation">:</span><span class="token punctuation">:</span>hi               <span class="token punctuation">{</span><span class="token string">"user"</span><span class="token punctuation">:</span><span class="token string">"tester"</span><span class="token punctuation">}</span>
<span class="token operator">></span><span class="token operator">></span> Hello<span class="token punctuation">,</span> tester
</code></pre>
<h2 id="Hello-World-Ricardian-Contract【合约】"><a href="#Hello-World-Ricardian-Contract【合约】" class="headerlink" title="Hello World Ricardian Contract【合约】"></a>Hello World Ricardian Contract【合约】</h2><p>Every smart【智能】 contract must have a matching【匹配】 Ricardian contract. The Ricardian Contract specifies【指定】 the legally【合法】 binding behavior【行为】 associated with each action of the smart【智能】 contract. The Ricardian Contract for the Hello World Contract is listed【列出】 here.</p>
<h2 id="CONTRACT【合约】-FOR-HELLO-WORLD"><a href="#CONTRACT【合约】-FOR-HELLO-WORLD" class="headerlink" title="CONTRACT【合约】 FOR HELLO WORLD"></a>CONTRACT【合约】 FOR HELLO WORLD</h2><h3 id="Parameters【参数】"><a href="#Parameters【参数】" class="headerlink" title="Parameters【参数】"></a>Parameters【参数】</h3><p>Input parameters: NONE</p>
<p>Implied【隐晦】 parameters: </p>
<ul>
<li>_<strong>account_name</strong>_ (name of the party invoking and signing the contract)</li>
</ul>
<h3 id="Intent【意图】"><a href="#Intent【意图】" class="headerlink" title="Intent【意图】"></a>Intent【意图】</h3><p>INTENT. The intention of the author and the invoker【祈求】 of this contract is to print output. It shall have no other effect.</p>
<h3 id="Term【期限】"><a href="#Term【期限】" class="headerlink" title="Term【期限】"></a>Term【期限】</h3><p>TERM. This Contract expires【期满】 at the conclusion【结论】 of code execution【执行】.</p>
<h3 id="Warranty【保证】"><a href="#Warranty【保证】" class="headerlink" title="Warranty【保证】"></a>Warranty【保证】</h3><p>WARRANTY.  shall uphold its Obligations【义务】 under this Contract in a timely and workmanlike manner【方式】, using knowledge and recommendations for performing the services【服务】 which meet generally acceptable standards【标准】 set forth by EOSIO Blockchain Block Producers【生产者】.</p>
<h3 id="Default【默认】"><a href="#Default【默认】" class="headerlink" title="Default【默认】"></a>Default【默认】</h3><p>DEFAULT. The occurrence【事件】 of any of the following shall constitute a material【材料】 default under this Contract【合约】: </p>
<h3 id="Remedies【纠正】"><a href="#Remedies【纠正】" class="headerlink" title="Remedies【纠正】"></a>Remedies【纠正】</h3><p>REMEDIES. In addition to any and all other rights a party may have available【可用】 according to law, if a party defaults【默认】 by failing【失败】 to substantially perform any provision, term or condition of this Contract, the other party may terminate【终止】 the Contract by providing written notice【通知】 to the defaulting party. This notice shall describe【描述】 with sufficient detail【细节】 the nature of the default. The party receiving【收到】 such notice shall promptly be removed【移除】 from being a Block Producer and this Contract【合约】 shall be automatically terminated【终止】. </p>
<h3 id="Force-Majeure【不可抗力】"><a href="#Force-Majeure【不可抗力】" class="headerlink" title="Force Majeure【不可抗力】"></a>Force Majeure【不可抗力】</h3><p>FORCE MAJEURE. If performance of this Contract or any obligation under this Contract is prevented【防止】, restricted, or interfered with by causes beyond either party’s reasonable control (“Force Majeure”), and if the party unable to carry out its obligations gives the other party prompt written notice【通知】 of such event, then the obligations of the party invoking this provision shall be suspended to the extent necessary【必要】 by such event【事件】. The term Force Majeure shall include, without【没有】 limitation【限制】, acts of God, fire, explosion, vandalism, storm or other similar【类似】 occurrence, orders or acts of military or civil authority, or by national emergencies, insurrections, riots, or wars, or strikes, lock-outs, work stoppages, or supplier failures. The excused party shall use reasonable efforts under the circumstances to avoid or remove such causes of non-performance and shall proceed to perform with reasonable dispatch whenever such causes【原因】 are removed or ceased. An act or omission shall be deemed within the reasonable control of a party if committed, omitted, or caused by such party, or its employees, officers, agents, or affiliates. </p>
<h3 id="Dispute【争议】-Resolution【解决】"><a href="#Dispute【争议】-Resolution【解决】" class="headerlink" title="Dispute【争议】 Resolution【解决】"></a>Dispute【争议】 Resolution【解决】</h3><p>DISPUTE RESOLUTION. Any controversies or disputes arising out of or relating【相关】 to this Contract will be resolved【决定】 by binding arbitration under the default【默认】 rules set forth by the EOSIO Blockchain【区块链】. The arbitrator’s award【奖励】 will be final, and judgment may be entered【进入】 upon it by any court having proper【合理】 jurisdiction. </p>
<h3 id="Entire-Agreement【协议】"><a href="#Entire-Agreement【协议】" class="headerlink" title="Entire Agreement【协议】"></a>Entire Agreement【协议】</h3><p>ENTIRE AGREEMENT. This Contract contains【包含】 the entire agreement【协议】 of the parties, and there are no other promises【承诺】 or conditions in any other agreement whether oral or written concerning the subject matter of this Contract. This Contract supersedes any prior written or oral agreements between the parties. </p>
<h3 id="Severability【可分割性】"><a href="#Severability【可分割性】" class="headerlink" title="Severability【可分割性】"></a>Severability【可分割性】</h3><p>SEVERABILITY. If any provision of this Contract will be held to be invalid【无效】 or unenforceable for any reason【理由】, the remaining provisions will continue【继续】 to be valid and enforceable. If a court finds that any provision of this Contract is invalid or unenforceable, but that by limiting【限制】 such provision it would become valid and enforceable, then such provision will be deemed to be written, construed, and enforced as so limited. </p>
<h3 id="Amendment【修订】"><a href="#Amendment【修订】" class="headerlink" title="Amendment【修订】"></a>Amendment【修订】</h3><p>AMENDMENT. This Contract may be modified【修改】 or amended in writing by mutual agreement between the parties, if the writing is signed【签名】 by the party obligated under the amendment. </p>
<h3 id="Governing【统治】-Law"><a href="#Governing【统治】-Law" class="headerlink" title="Governing【统治】 Law"></a>Governing【统治】 Law</h3><p>GOVERNING LAW. This Contract shall be construed in accordance with the Maxims of Equity. </p>
<h3 id="Notice【通知】"><a href="#Notice【通知】" class="headerlink" title="Notice【通知】"></a>Notice【通知】</h3><p>NOTICE. Any notice or communication【沟通】 required or permitted under this Contract shall be sufficiently given if delivered to a verifiable email address or to such other email address as one party may have publicly furnished in writing, or published on a broadcast【广播】 contract provided by this blockchain for purposes of providing notices of this type. </p>
<h3 id="Waiver【弃权】-of-Contractual-Right"><a href="#Waiver【弃权】-of-Contractual-Right" class="headerlink" title="Waiver【弃权】 of Contractual Right"></a>Waiver【弃权】 of Contractual Right</h3><p>WAIVER OF CONTRACTUAL RIGHT. The failure【失败】 of either party to enforce any provision of this Contract shall not be construed as a waiver or limitation of that party’s right to subsequently enforce and compel strict compliance with every provision of this Contract. </p>
<h3 id="Arbitrator’s【仲裁者】-Fees-to-Prevailing-Party"><a href="#Arbitrator’s【仲裁者】-Fees-to-Prevailing-Party" class="headerlink" title="Arbitrator’s【仲裁者】 Fees to Prevailing Party"></a>Arbitrator’s【仲裁者】 Fees to Prevailing Party</h3><p>ARBITRATOR’S FEES TO PREVAILING PARTY. In any action arising hereunder or any separate【分离】 action pertaining to the validity of this Agreement, both sides shall pay half the initial cost of arbitration, and the prevailing party shall be awarded reasonable arbitrator’s fees and costs.</p>
<h3 id="Construction【建造】-and-Interpretation"><a href="#Construction【建造】-and-Interpretation" class="headerlink" title="Construction【建造】 and Interpretation"></a>Construction【建造】 and Interpretation</h3><p>CONSTRUCTION AND INTERPRETATION. The rule requiring construction【构造】 or interpretation against the drafter is waived. The document shall be deemed as if it were drafted by both parties in a mutual effort. </p>
<h3 id="In-Witness【见证】-Whereof【关于】"><a href="#In-Witness【见证】-Whereof【关于】" class="headerlink" title="In Witness【见证】 Whereof【关于】"></a>In Witness【见证】 Whereof【关于】</h3><p>IN WITNESS WHEREOF, the parties hereto have caused this Agreement to be executed【执行】 by themselves or their duly authorized representatives as of the date of execution, and authorized as proven by the cryptographic signature【签名】 on the transaction【交易】 that invokes this contract.</p>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="/2018/05/21/online-eos-14/">« Exchange【交...</a></span>
  <span class="right"><a href="/2018/05/21/online-eos-16/">Comprehens... »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年05月21日 20:05</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  online-eos-15
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

